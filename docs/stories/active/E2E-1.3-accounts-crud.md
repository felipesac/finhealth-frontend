# Story E2E-1.3: Accounts CRUD flow

**Epic:** FINHEALTH-EPIC-2 (E2E Test Expansion)
**Sprint:** 1 — Foundation + Core Business
**Points:** 5
**Priority:** High
**Status:** Pending
**Agent:** @dev

---

## Context

Medical accounts (contas medicas) are the core entity. The full CRUD flow — list, create, view details — is the primary user journey and has zero E2E coverage.

## Acceptance Criteria

- [ ] Test accounts list page renders table with columns (numero, paciente, operadora, status, valor)
- [ ] Test accounts list filtering by status
- [ ] Test accounts list search by account number
- [ ] Test create new account form (/contas/nova) — fill all required fields and submit
- [ ] Test form validation — submit empty form shows errors
- [ ] Test account detail page (/contas/[id]) renders account info, procedures, and glosas
- [ ] Test account status badge displays correct variant
- [ ] Test bulk operations (select multiple → action)
- [ ] Test empty state when no accounts match filter
- [ ] Create Page Object Models: `e2e/pages/accounts-list.page.ts`, `e2e/pages/account-form.page.ts`, `e2e/pages/account-detail.page.ts`

## Technical Notes

- Depends on E2E-1.1 (auth fixture + seed helpers)
- Seed at least 5 accounts with different statuses for list tests
- Form test should fill: patient, insurer, type, dates, procedures
- Use `page.route()` to mock API for deterministic responses

## Files to Create

- `e2e/accounts.spec.ts`
- `e2e/pages/accounts-list.page.ts`
- `e2e/pages/account-form.page.ts`
- `e2e/pages/account-detail.page.ts`

## Definition of Done

- [ ] Full CRUD cycle covered: list → create → view detail
- [ ] Form validation tested
- [ ] Filtering and search tested
- [ ] All tests pass in headless mode
