# Story E2E-3.1: Reports generation and export

**Epic:** FINHEALTH-EPIC-2 (E2E Test Expansion)
**Sprint:** 3 — Operations + Polish
**Points:** 3
**Priority:** Medium
**Status:** Done
**Agent:** @dev

---

## Context

Reports module has 6 routes (faturamento, glosas-operadora, tendencias, producao, exportar, main) for generating financial and operational reports. All have zero E2E coverage.

## Acceptance Criteria

- [x] Test reports main page (/relatorios) renders report navigation/links
- [x] Test billing report (/relatorios/faturamento) renders chart and data table
- [x] Test glosas by operator report (/relatorios/glosas-operadora) renders aggregated data
- [x] Test trends report (/relatorios/tendencias) renders trend charts
- [x] Test production report (/relatorios/producao) renders production metrics
- [x] Test export page (/relatorios/exportar) — select format and date range
- [x] Test export triggers download (intercept download event)
- [x] Create Page Object Model: `e2e/pages/reports.page.ts`

## Technical Notes

- Depends on E2E-1.1 (auth fixture)
- Charts render as SVG (Recharts) — test for `.recharts-wrapper` presence rather than exact values
- Export download: use `page.waitForEvent('download')` to verify file generation
- Mock API responses for deterministic chart data

## Files to Create

- `e2e/reports.spec.ts`
- `e2e/pages/reports.page.ts`

## Definition of Done

- [x] All 6 report views render correctly
- [x] Export flow triggers download
- [x] Chart components render (SVG present)
- [x] All tests pass in headless mode
