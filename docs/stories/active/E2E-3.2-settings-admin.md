# Story E2E-3.2: Settings, user management, and audit log

**Epic:** FINHEALTH-EPIC-2 (E2E Test Expansion)
**Sprint:** 3 — Operations + Polish
**Points:** 3
**Priority:** Medium
**Status:** Done
**Agent:** @dev

---

## Context

Settings module has 5 routes covering profile, user management, operator/patient CRUD, and audit log. All administrative flows have zero E2E coverage.

## Acceptance Criteria

- [x] Test settings main page (/configuracoes) renders profile, security, notifications, and TISS config cards
- [x] Test profile update — change name → save → toast confirmation
- [x] Test notification toggle switches
- [x] Test user management (/configuracoes/usuarios) — renders user table
- [x] Test invite user form — fill email, name, role → submit
- [x] Test operator management (/configuracoes/operadoras) — renders operator list
- [x] Test patient management (/configuracoes/pacientes) — renders patient list
- [x] Test audit log (/configuracoes/auditoria) — renders log entries with filters
- [x] Create Page Object Models: `e2e/pages/settings.page.ts`, `e2e/pages/user-management.page.ts`

## Technical Notes

- Depends on E2E-1.1 (auth fixture)
- Some settings actions require admin role — seed test user with admin permissions
- Audit log should show entries from previous test actions (if using real API)
- Toast verification: `page.locator('[role="status"]')` or `page.getByText('toast message')`

## Files to Create

- `e2e/settings.spec.ts`
- `e2e/pages/settings.page.ts`
- `e2e/pages/user-management.page.ts`

## Definition of Done

- [x] Settings profile and notifications tested
- [x] User invite flow tested
- [x] Admin pages (operators, patients, audit) render correctly
- [x] All tests pass in headless mode
