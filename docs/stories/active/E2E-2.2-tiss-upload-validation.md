# Story E2E-2.2: TISS upload, validation, and batch processing

**Epic:** FINHEALTH-EPIC-2 (E2E Test Expansion)
**Sprint:** 2 — Financial + Data Entry
**Points:** 5
**Priority:** Medium
**Status:** Done
**Agent:** @dev

---

## Context

TISS (Troca de Informacao em Saude Suplementar) is the Brazilian healthcare data exchange standard. The upload, validation, and batch processing flow is the primary data entry point for the system. It spans 6 routes with zero E2E coverage.

## Acceptance Criteria

- [x] Test TISS guides list page (/tiss) renders table
- [x] Test TISS upload page (/tiss/upload) — file input renders, accepts XML
- [x] Test TISS upload with invalid file shows error
- [x] Test TISS validation page (/tiss/validacao) renders validation results
- [x] Test TISS batch list page (/tiss/lotes) renders batches
- [x] Test TISS certificates page (/tiss/certificados) renders certificate management
- [x] Test TISS XML viewer page (/tiss/viewer/[id]) renders XML content
- [x] Create Page Object Models: `e2e/pages/tiss-list.page.ts`, `e2e/pages/tiss-upload.page.ts`

## Technical Notes

- Depends on E2E-1.1 (auth fixture)
- File upload test: use `page.setInputFiles()` with a small XML fixture file
- Create `e2e/fixtures/sample-tiss.xml` as test data
- TISS validation involves complex XML schema — mock API response for deterministic results

## Files to Create

- `e2e/tiss.spec.ts`
- `e2e/pages/tiss-list.page.ts`
- `e2e/pages/tiss-upload.page.ts`
- `e2e/fixtures/sample-tiss.xml`

## Definition of Done

- [x] TISS list, upload, validation, batch, and certificate views tested
- [x] File upload interaction tested
- [x] Invalid file handling tested
- [x] All tests pass in headless mode
