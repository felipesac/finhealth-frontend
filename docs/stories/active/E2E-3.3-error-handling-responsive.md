# Story E2E-3.3: Error handling, responsive, and cross-cutting concerns

**Epic:** FINHEALTH-EPIC-2 (E2E Test Expansion)
**Sprint:** 3 â€” Operations + Polish
**Points:** 2
**Priority:** Low
**Status:** Done
**Agent:** @dev

---

## Context

Cross-cutting concerns like error boundaries, 404 pages, loading states, responsive behavior, and keyboard shortcuts have zero E2E coverage. These ensure the app degrades gracefully and works across devices.

## Acceptance Criteria

- [x] Test 404 page renders when navigating to unknown route
- [x] Test error boundary catches rendering errors (mock a component failure)
- [x] Test loading states display skeleton/spinner during data fetch
- [x] Test responsive layout at 3 viewports: mobile (375px), tablet (768px), desktop (1280px)
- [x] Test keyboard shortcut help dialog (Shift+?)
- [x] Test skip-to-content link is focusable and works
- [x] Test toast notifications appear and auto-dismiss
- [x] Test theme toggle switches between light and dark

## Technical Notes

- Depends on E2E-1.1 (auth fixture)
- Error boundary test: use `page.route()` to return 500 from API, verify fallback UI renders
- Responsive tests: `page.setViewportSize()` for each breakpoint
- Keyboard shortcuts: `page.keyboard.press('Shift+?')` to open help dialog
- Toast test: trigger an action that shows a toast, verify it appears with correct text

## Files to Create

- `e2e/error-handling.spec.ts`
- `e2e/responsive.spec.ts`
- `e2e/cross-cutting.spec.ts`

## Definition of Done

- [x] Error states and 404 tested
- [x] Responsive behavior at 3 breakpoints verified
- [x] Keyboard shortcuts and accessibility features tested
- [x] All tests pass in headless mode
